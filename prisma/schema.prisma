// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model Category {
    id            Int             @id @default(autoincrement())
    title         String
    slug          String          @unique
    image         String?
    parentId      Int?
    parent        Category?       @relation("parentSubCategories", fields: [parentId], references: [id])
    subCategories Category[]      @relation("parentSubCategories")
    products      Product[]
    filters       ProductFilter[]
}

model Product {
    id          Int      @id @default(autoincrement())
    name        String
    description String
    price       Int
    image       String[]
    categoryId  Int
    category    Category @relation(fields: [categoryId], references: [id])
    // ProductProperty ProductProperty[]
}

// model ProductProperty {
//     id                   Int                    @id @default(autoincrement())
//     title                String
//     ProductId            Int
//     product              Product                @relation(fields: [ProductId], references: [id])
//     productPropertyField ProductPropertyField[]
// }

// model ProductPropertyField {
//     id                Int             @id @default(autoincrement())
//     title             String
//     value             String
//     ProductPropertyId Int
//     productProperty   ProductProperty @relation(fields: [ProductPropertyId], references: [id])
// }

model ProductFilter {
    id         Int      @id @default(autoincrement())
    title      String
    value      String
    count      Int
    type       String
    CategoryId Int
    category   Category @relation(fields: [CategoryId], references: [id])
}
